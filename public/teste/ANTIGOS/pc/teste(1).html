<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tocare Music</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
        }

        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        h1,
        h3 {
            margin-bottom: 10px;
        }

        .section {
            margin-bottom: 20px;
        }

        .line {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 10px;
        }

        .chord-line {
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            color: blue;
            white-space: pre-wrap;
        }

        .lyrics-line {
            gap: 10px;
            font-size: 18px;
            line-height: 28px;
            white-space: pre-wrap;
        }

        .word {
            position: relative;
            display: inline-block;
        }

        .chord {
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
            color: blue;
        }

        .controls {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 id="song-title"></h1>
        <h3 id="song-key"></h3>

        <div class="controls">
            <button onclick="adjustFontSize(1)">A+</button>
            <button onclick="adjustFontSize(-1)">A-</button>
        </div>
        <pre>
        <div id="song-container"></div>
        </pre>
    </div>

    <script>

        let fontSize = 18;
        let lineHeight = 28;

        function adjustFontSize(change) {
            fontSize += change;
            lineHeight += change * 1.8;
            document.querySelectorAll('.lyrics-line').forEach(line => {
                line.style.fontSize = fontSize + 'px';
                line.style.lineHeight = lineHeight + 'px';
            });

            document.querySelectorAll('.chord').forEach(line => {
                line.style.fontSize = fontSize + 'px';
                //line.style.lineHeight = lineHeight + 'px';
            });
        }
        //
        async function loadSong() {
            try {
                let response = await fetch("song.json");
                let song = await response.json();

                document.getElementById("song-title").textContent = song.title;
                document.getElementById("song-key").textContent = "Tom: " + song.key;

                let container = document.getElementById("song-container");
                container.innerHTML = "";

                song.sections.forEach(section => {
                    let sectionDiv = document.createElement("div");
                    sectionDiv.classList.add("section");

                    if (section.type === "intro") {
                        let introDiv = document.createElement("div");
                        introDiv.classList.add("line");
                        introDiv.innerHTML = `<strong>INTRO: </strong> ${section.chords.map(row => row.join(" ")).join(" | ")}`;
                        sectionDiv.appendChild(introDiv);
                    } else {
                        section.lines.forEach(line => {
                            let lineDiv = document.createElement("div");
                            lineDiv.classList.add("line");

                            let chordLineDiv = document.createElement("div");
                            chordLineDiv.classList.add("chord-line");

                            let lyricsLineDiv = document.createElement("div");
                            lyricsLineDiv.classList.add("lyrics-line");

                            line.lyrics.forEach((word, index) => {
                                let wordSpan = document.createElement("span");
                                wordSpan.classList.add("word");
                                wordSpan.textContent = word + " ";

                                if (line.chords[index]) {
                                    let chordSpan = document.createElement("span");
                                    chordSpan.classList.add("chord");
                                    chordSpan.textContent = line.chords[index];
                                    wordSpan.appendChild(chordSpan);
                                }

                                lyricsLineDiv.appendChild(wordSpan);
                            });

                            lineDiv.appendChild(lyricsLineDiv);
                            sectionDiv.appendChild(lineDiv);
                        });
                    }

                    container.appendChild(sectionDiv);
                });

            } catch (error) {
                console.error("Erro ao carregar a m√∫sica:", error);
            }
        }

        loadSong();

    </script>
</body>

</html>