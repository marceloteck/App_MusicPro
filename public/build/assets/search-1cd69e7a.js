import{r as i,a as _,c as a,b as p,d as e,e as b,F as h,o,g,v as x,A as k,t as n,f as v,l as w}from"./app-7df99663.js";const B={class:"indexSearch"},C={class:"container"},V={class:"input-group mt-3"},q=["disabled"],F={key:0,class:"text-danger mt-3"},P={key:1,class:"list-group mt-4"},A={class:"d-flex justify-content-between align-items-center"},D={class:"mb-1"},E={class:"text-muted"},I={key:0,class:"mb-0 mt-2 text-muted"},L=["href"],N={key:2,class:"text-muted mt-4"},K={__name:"search",setup(j){const u=i(""),d=i([]),r=i(!1),c=i(""),m=async()=>{c.value="",r.value=!0;try{const l=await fetch(`/offline/songs?q=${encodeURIComponent(u.value)}`);if(!l.ok)throw new Error("Falha ao buscar músicas.");const s=await l.json();d.value=(s==null?void 0:s.songs)??[]}catch(l){c.value=l.message??"Erro ao buscar músicas."}finally{r.value=!1}};return(l,s)=>{const y=_("AppHead"),f=_("LayoutIndexPages");return o(),a(h,null,[p(y,{title:"Pesquisar"}),e("div",B,[p(f,null,{default:b(()=>[e("div",C,[s[1]||(s[1]=e("h1",null,"Pesquisar músicas",-1)),e("div",V,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),class:"form-control",placeholder:"Digite o título ou trecho da letra",onKeyup:k(m,["enter"])},null,544),[[x,u.value]]),e("button",{class:"btn btn-primary",disabled:r.value,onClick:m},n(r.value?"Buscando...":"Buscar"),9,q)]),c.value?(o(),a("p",F,n(c.value),1)):v("",!0),d.value.length?(o(),a("div",P,[(o(!0),a(h,null,w(d.value,t=>(o(),a("div",{key:t.id,class:"list-group-item"},[e("div",A,[e("div",null,[e("h5",D,n(t.title),1),e("small",E,n(t.artist),1),t.lyrics?(o(),a("p",I,n(t.lyrics.slice(0,120))+"... ",1)):v("",!0)]),e("a",{class:"btn btn-outline-secondary",href:`/songs/${t.id}`}," Ver detalhes ",8,L)])]))),128))])):(o(),a("p",N,"Faça uma busca para ver resultados."))])]),_:1})])],64)}}};export{K as default};
