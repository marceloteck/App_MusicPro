import{_ as F,r as h,Q as M,m as v,a as y,c as o,b as w,e as U,F as b,o as n,d as t,t as d,f as r,l as k,h as E,w as $,g as m,v as p,N as _,S as x}from"./app-7df99663.js";const j={key:0,class:"text-center p-4"},H={key:1},I={class:"tab-content",id:"bandTabContent"},O={class:"tab-pane fade",id:"evconcluido",role:"tabpanel"},P={class:"row"},Q={class:"col-md-6"},R={class:"container p-3"},z={class:"text-muted"},G={class:"tab-pane fade show active",id:"events",role:"tabpanel"},J={class:"row"},K={class:"col-md-6"},W={class:"container p-3"},X={key:0,class:"mb-4"},Y={key:0},Z={key:0},tt={class:"row"},et={class:"col-md-6"},st={class:"container p-3"},at=["onClick"],ot={class:"mb-0"},nt={key:0},it={key:1},lt={__name:"Show",props:{band:{type:Object,required:!0},events:{type:Array,required:!0},message:{type:String,required:!1}},setup(i){const c=h(!1);function C(){c.value=!c.value}const u=i,S=M(),f=v(()=>S.props.auth.user.id),l=h({title:"",date:"",description:""}),A=()=>{_.visit("/bands")},g=v(()=>{var a;return!((a=u.band)!=null&&a.members)||!f.value?null:u.band.members.find(e=>e.user_id===f.value)||null}),N=v(()=>{var a;return((a=g.value)==null?void 0:a.role)==="admin"}),V=v(()=>{var a;return((a=g.value)==null?void 0:a.role)==="editor"}),D=a=>new Date(a).toLocaleDateString("pt-BR"),B=async()=>{await _.post(`/bands/${u.band.id}/events`,l.value,{preserveScroll:!0,onSuccess:()=>{x.fire("Evento criado!","","success"),l.value={title:"",date:"",description:""}},onError:a=>{x.fire("Erro",Object.values(a).flat().join(`
`),"error")}})},L=a=>_.visit(`/bands/${u.band.id}/events/${a}`);return(a,e)=>{const q=y("AppHead"),T=y("LayoutPageAcess");return n(),o(b,null,[w(q,{title:"Bandas e Listas de Músicas"}),w(T,{title:i.band.name,band:i.band},{default:U(()=>[i.message?(n(),o("div",j,[t("h2",null,d(i.message),1),t("button",{class:"btn btn-primary mt-3",onClick:A},"Voltar para minhas bandas"),e[3]||(e[3]=t("img",{src:"/Assets/image/error/403.webp",alt:"Logo",width:"200",class:"mt-3"},null,-1))])):r("",!0),i.band?(n(),o("div",H,[e[7]||(e[7]=t("ul",{class:"nav nav-tabs nav-fill mb-3",id:"bandTabs",role:"tablist"},[t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link active",id:"events-tab","data-bs-toggle":"tab","data-bs-target":"#events",type:"button",role:"tab"},"Eventos Ativos")]),t("li",{class:"nav-item",role:"presentation"},[t("button",{class:"nav-link",id:"evconcluido-tab","data-bs-toggle":"tab","data-bs-target":"#evconcluido",type:"button",role:"tab"},"Eventos Concluidos")])],-1)),t("div",I,[t("div",O,[t("div",P,[t("div",Q,[t("div",R,[(n(!0),o(b,null,k(i.band.members,s=>(n(),o("div",{key:s.id,class:"mb-2 member-item"},[E(d(s.user.name)+" ",1),t("span",z,d(s.role),1)]))),128))])])])]),t("div",G,[t("div",J,[t("div",K,[t("div",W,[N.value||V.value?(n(),o("div",X,[t("button",{class:"btn btn-outline-primary w-100 mb-3",onClick:C},d(c.value?"Cancelar":"Adicionar Novo Evento"),1),c.value?(n(),o("div",Y,[t("form",{onSubmit:$(B,["prevent"])},[m(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.title=s),placeholder:"Título",class:"form-control mb-2",required:""},null,512),[[p,l.value.title]]),m(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.date=s),type:"date",class:"form-control mb-2",required:""},null,512),[[p,l.value.date]]),m(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.description=s),placeholder:"Descrição",class:"form-control mb-2"},null,512),[[p,l.value.description]]),e[4]||(e[4]=t("button",{type:"submit",class:"btn btn-danger w-100"},"Criar Evento",-1))],32)])):r("",!0)])):r("",!0)])])]),i.events.length?(n(),o("div",Z,[t("div",tt,[t("div",et,[t("div",st,[(n(!0),o(b,null,k(i.events,s=>(n(),o("div",{key:s.id,onClick:dt=>L(s.id),class:"card mb-2 p-2 shadow-sm"},[t("h5",null,d(s.title),1),t("p",ot,[e[5]||(e[5]=t("strong",null,"Data:",-1)),E(" "+d(D(s.date)),1)]),s.description?(n(),o("p",nt,d(s.description),1)):r("",!0)],8,at))),128))])])])])):(n(),o("div",it,e[6]||(e[6]=[t("p",{class:"text-muted"},"Não há eventos cadastrados.",-1)])))])])])):r("",!0)]),_:1},8,["title","band"])],64)}}},ct=F(lt,[["__scopeId","data-v-2f520fc9"]]);export{ct as default};
