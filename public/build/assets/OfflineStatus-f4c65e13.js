import{_,r as i,q as m,H as p,c,d as l,h as w,t as r,f as g,n as y,o as f}from"./app-0b8657a5.js";const h={key:0,class:"ms-2"},S=["disabled"],b={__name:"OfflineStatus",setup(L){const n=i(typeof navigator<"u"?navigator.onLine:!0),s=i(!1),t=i(null),o=()=>{n.value=navigator.onLine},u=async()=>{if(!(!n.value||s.value)){s.value=!0;try{const a=await fetch("/offline/songs");if(!a.ok)throw new Error("Falha ao buscar músicas.");const e=await a.json(),d=(e==null?void 0:e.songs)??[];for(const v of d)await fetch(`/offline/songs/${v.id}`);t.value=new Date}catch(a){console.warn("Falha ao sincronizar músicas.",a)}finally{s.value=!1}}};return m(()=>{window.addEventListener("online",o),window.addEventListener("offline",o)}),p(()=>{window.removeEventListener("online",o),window.removeEventListener("offline",o)}),(a,e)=>(f(),c("div",{class:y(["offline-status",{online:n.value,offline:!n.value}])},[e[0]||(e[0]=l("span",{class:"indicator"},null,-1)),l("span",null,[w(r(n.value?"Online":"Offline")+" ",1),t.value?(f(),c("small",h,"Última sincronização: "+r(t.value.toLocaleString("pt-BR")),1)):g("",!0)]),l("button",{class:"btn btn-sm btn-light",onClick:u,disabled:!n.value||s.value},r(s.value?"Sincronizando...":"Sincronizar"),9,S)],2))}},E=_(b,[["__scopeId","data-v-3f4e142f"]]);export{E as default};
