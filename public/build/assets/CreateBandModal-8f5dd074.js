import{_ as h,r,a as w,c,b as D,e as E,o as v,d as a,t as f,f as _,g as m,v as p,w as k,N as b}from"./app-0b8657a5.js";const N={class:"CreateBandModalClass"},V={key:0,class:"error-message"},R={class:"form-group"},U={class:"form-group"},F={class:"form-group"},P={class:"form-group"},I={key:0,class:"image-preview"},L=["src"],S={class:"form-actions"},j=["disabled"],q={__name:"CreateBandModal",setup(z,{expose:M}){const t=r(null),d=r(!1),i=r(null),C=r("80vh"),s=r(null),o=r({name:"",description:"",genre:"",image:null});M({ExecuteCreateBandModal:()=>{t.value&&t.value.openModal()}});const y=()=>{t.value&&t.value.closeModal(),g()},g=()=>{o.value={name:"",description:"",genre:"",image:null},i.value=null,s.value=null},B=l=>{const e=l.target.files[0];if(e){o.value.image=e;const u=new FileReader;u.onload=n=>{i.value=n.target.result},u.readAsDataURL(e)}},x=async()=>{d.value=!0,s.value=null;try{const l=new FormData;l.append("name",o.value.name),l.append("description",o.value.description),l.append("genre",o.value.genre),o.value.image&&l.append("image",o.value.image),await b.post("/bands",l,{onSuccess:()=>{g(),t.value&&t.value.closeModal(),b.reload()},onError:e=>{s.value=Object.values(e).flat().join(`
`),console.error("Erro ao criar banda:",e)}})}catch(l){s.value="Erro ao criar banda. Por favor, tente novamente.",console.error("Erro:",l)}finally{d.value=!1}};return(l,e)=>{const u=w("LayoutModalMobile");return v(),c("div",N,[D(u,{ref_key:"RefCreateBandModal",ref:t,height:C.value},{default:E(()=>[e[7]||(e[7]=a("div",{class:"modal-header"},[a("h2",null,"Criar Nova Banda")],-1)),a("form",{onSubmit:k(x,["prevent"]),class:"band-form"},[s.value?(v(),c("div",V,f(s.value),1)):_("",!0),a("div",R,[e[3]||(e[3]=a("label",{for:"name"},"Nome da Banda",-1)),m(a("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=n=>o.value.name=n),required:"",placeholder:"Digite o nome da sua banda"},null,512),[[p,o.value.name]])]),a("div",U,[e[4]||(e[4]=a("label",{for:"description"},"Descrição",-1)),m(a("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=n=>o.value.description=n),rows:"3",placeholder:"Descreva sua banda"},null,512),[[p,o.value.description]])]),a("div",F,[e[5]||(e[5]=a("label",{for:"genre"},"Gênero Musical",-1)),m(a("input",{type:"text",id:"genre","onUpdate:modelValue":e[2]||(e[2]=n=>o.value.genre=n),required:"",placeholder:"Ex: Rock, Pop, Jazz..."},null,512),[[p,o.value.genre]])]),a("div",P,[e[6]||(e[6]=a("label",{for:"image"},"Imagem da Banda",-1)),a("input",{type:"file",id:"image",onChange:B,accept:"image/*"},null,32),i.value?(v(),c("div",I,[a("img",{src:i.value,alt:"Preview da imagem"},null,8,L)])):_("",!0)]),a("div",S,[a("button",{type:"button",class:"btn-cancel",onClick:y},"Cancelar"),a("button",{type:"submit",class:"btn-submit",disabled:d.value},f(d.value?"Criando...":"Criar Banda"),9,j)])],32)]),_:1},8,["height"])])}}},H=h(q,[["__scopeId","data-v-5ed49985"]]);export{H as default};
