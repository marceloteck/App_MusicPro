import{_ as P,Q as U,m as q,r as v,p as z,q as G,s as h,a as p,c as d,b as k,d as s,e as Q,x as j,f as _,F as B,o as t,t as r,n as x,h as L,l as I,y as $}from"./app-0b8657a5.js";const J={class:"IndexBands"},K={key:0,class:"alert alert-danger"},O={class:"tabs"},W={key:1,class:"tab-content"},X={class:"bands-grid"},Y={class:"band-actions"},Z=["href"],ss=["onClick"],es=["onClick"],as={key:2,class:"tab-content"},ns={class:"lists-grid"},ts={class:"list-actions"},ls=["onClick"],os=["onClick"],ds=["onClick"],is={__name:"Index",props:{bands:{type:Array,default:()=>[]},userLists:{type:Array,default:()=>[]}},setup(b){const M=b,N=U(),y=q(()=>{var a;return((a=N.props.flash)==null?void 0:a.error)||null}),l=v("bands"),C=z(),m=v(null),f=v(null),i=v(null);G(()=>{h.value&&C.setUser(h.value)});const R=a=>C.checkUserRole(a),T=a=>{navigator.clipboard.writeText(`${window.location.origin}/bands/${a.id}`)},w=a=>{},A=a=>{},E=a=>{},V=()=>{m.value&&m.value.ExecuteCreateBandModal()},D=a=>{if(!a||!a.id){console.error("Dados da banda inválidos");return}i.value=null,$(()=>{var e;i.value={...a,members:((e=a.members)==null?void 0:e.map(o=>{var u;return{...o,user:o.user||{},user_id:o.user_id||((u=o.user)==null?void 0:u.id)}}))||[]},$(()=>{f.value?f.value.ExecuteManageBandModal():console.error("Modal não encontrado")})})},S=a=>{const e=M.bands.findIndex(o=>o.id===a);e!==-1&&M.bands.splice(e,1),i.value=null};return(a,e)=>{const o=p("AppHead"),u=p("LayoutIndexPages"),F=p("CreateBandModal"),H=p("ManageBandModal");return t(),d(B,null,[k(o,{title:"Bandas e Listas de Músicas"}),s("div",J,[k(u,null,{default:Q(()=>[y.value?(t(),d("div",K,r(y.value),1)):_("",!0),s("div",O,[s("button",{class:x({active:l.value==="bands"}),onClick:e[0]||(e[0]=n=>l.value="bands"),onTouchstart:e[1]||(e[1]=n=>l.value="bands")},e[4]||(e[4]=[s("span",{class:"material-symbols-outlined"},"groups",-1),s("span",null,"Minhas Bandas",-1)]),34),s("button",{class:x({active:l.value==="lists"}),onClick:e[2]||(e[2]=n=>l.value="lists"),onTouchstart:e[3]||(e[3]=n=>l.value="lists")},e[5]||(e[5]=[s("span",{class:"material-symbols-outlined"},"playlist_play",-1),s("span",null,"Minhas Listas",-1)]),34)]),l.value==="bands"?(t(),d("div",W,[s("div",{class:"header-actions"},[e[7]||(e[7]=s("h1",null,"Minhas Bandas",-1)),s("button",{class:"btn-create",onClick:V},e[6]||(e[6]=[s("span",{class:"material-symbols-outlined"},"add",-1),L(" Nova Banda ")]))]),s("div",X,[(t(!0),d(B,null,I(b.bands,n=>(t(),d("div",{key:n.id,class:"band-card"},[s("h3",null,r(n.name),1),s("p",null,"Seu papel: "+r(R(n)),1),s("div",Y,[s("a",{href:"/bands/"+n.id,class:"btn-view"},"Ver Banda",8,Z),s("button",{onClick:c=>T(n),class:"btn-share"},"Compartilhar",8,ss),s("button",{onClick:c=>D(n),class:"btn-manage"},e[8]||(e[8]=[s("span",{class:"material-symbols-outlined"},"settings",-1),L(" Gerenciar ")]),8,es)])]))),128))])])):_("",!0),l.value==="lists"?(t(),d("div",as,[e[9]||(e[9]=s("h1",null,"Minhas Listas de Músicas",-1)),e[10]||(e[10]=s("button",{class:"btn-create"},"Criar Nova Lista",-1)),s("div",ns,[(t(!0),d(B,null,I(b.userLists,n=>{var c;return t(),d("div",{key:n.id,class:"list-card"},[s("h3",null,r(n.name),1),s("p",null,r(((c=n.songs)==null?void 0:c.length)||0)+" músicas",1),s("div",ts,[s("button",{onClick:g=>A(n.id),class:"btn-edit"},"Editar",8,ls),s("button",{onClick:g=>E(n.id),class:"btn-share"},"Compartilhar",8,os),s("button",{onClick:g=>w(n.id),class:"btn-delete"},"Excluir",8,ds)])])}),128))])])):_("",!0)]),_:1}),k(F,{ref_key:"createBandModalRef",ref:m},null,512),i.value?(t(),j(H,{key:0,ref_key:"manageBandModalRef",ref:f,band:i.value,onBandDeleted:S},null,8,["band"])):_("",!0)])],64)}}},us=P(is,[["__scopeId","data-v-895072a4"]]);export{us as default};
